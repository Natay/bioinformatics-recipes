

<h2>{{ title }}</h2>

<div id="{{id}}" style="width: 900px; height: 300px;"></div>

<script type="text/javascript">
  google.charts.load("current", {packages:["sankey"]});
  google.charts.setOnLoadCallback(drawChart);
   function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'From');
    data.addColumn('string', 'To');
    data.addColumn('number', 'Weight');

    data.addRows([
    {% for parent,child,count in data %}
        [ "{{parent}}", "{{child}}", {{count}}],
    {% endfor %}
    ]);

    // Set chart options
    var options = {
      width: 800,
      sankey: {
        node: { label: { fontName: 'Times-Roman',
                         fontSize: 14,
                         color: '#871b47',
                         bold: true,
                         italic: true },
                width: 5,
                nodePadding: 0
        } },
    };

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.Sankey(document.getElementById('{{id}}'));
    chart.draw(data, options);
   }
</script>
